import{a as c}from"./chunk-4XBQJDYT.js";import{a as i,b as r,c as l}from"./chunk-34HCEVDD.js";var m=JSON.parse(document.querySelector("[data-photoswipe-i18n]")?.dataset?.photoswipeI18n||"{}"),a=JSON.parse(document.querySelector("[data-photoswipe-fetch-options]")?.dataset?.photoswipeFetchOptions||"{}");a={...m,...a};var g=a.wrappingClass||"jonnitto-photoswipe-content",u=a.fetchLinkAppend||"";delete a.wrappingClass;delete a.fetchLinkAppend;var p=null;function w(e={}){e={...a,...e};let t=new c({preloadFirstSlide:!1,allowPanToNext:!1,initialZoomLevel:1,secondaryZoomLevel:1,maxZoomLevel:1,wheelToZoom:!1,closeOnVerticalDrag:!1,mainClass:"pswp--fetch",arrowKeys:!1,preloaderDelay:1e3,pswpModule:()=>import("./photoswipe.esm-PFX67TF7.js"),...e});return t.addFilter("isContentZoomable",()=>!1),t.addFilter("preventPointerEvent",()=>!0),t.on("firstUpdate",n=>{let o=i();o.setAttribute("data-turbo-temporary",!0),o?.addEventListener("wheel",s=>{s.stopImmediatePropagation(),s.stopPropagation()},{passive:!0}),o?.addEventListener("click",y)}),t.on("destroy",()=>{r({type:"fetch",action:"close"})}),t.on("contentLoad",async n=>{let{content:o}=n,s=o?.data?.src;if(o.type!="fetch"||!s)return;o.state="loading",n.preventDefault();let f=await h(s);o.element=f,p=o.element,o.onLoaded()}),t.init(),t}async function y(e){let t=e.target;if(!t.matches('[data-pswp-type="fetch"]'))return;e.preventDefault();let n=await h(t.href);p.replaceWith(n),p=n}async function L(e,t){let n=await fetch(e+t);if(!n.ok)throw new Error(a.errorMsg);let o=await n.text();return e=v(e),r({url:e,lightbox:e+t,type:"fetch",action:"open"}),o}function v(e){return new RegExp("^(http|https)://","i").test(e)?e:window.location.origin+(e.startsWith("/")?"":"/")+e}async function h(e){d(!0);let t=await L(e,u).catch(o=>`<p class="jonnitto-photoswipe-content__error">${o.message.replace('"%s"',e)}</p>`),n=l(t,g);return d(!1),n}function d(e=!0){i()?.classList.toggle("pswp--fetch-loading",e)}window.neosPhotoSwipe=window.neosPhotoSwipe||{};window.neosPhotoSwipe.fetch={init:w,lightbox:w()};
/*! For license information please see Fetch.js.LEGAL.txt */
//# sourceMappingURL=Fetch.js.map
